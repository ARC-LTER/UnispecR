"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ .)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, position = "jitter")) +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ .)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment) position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ .)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ .)
?geom_point
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ .)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
## SPECIFY SITE/DATE/ETC to ZOOM IN ON
check_site <- "LMAT"
check_dates <-  c(lubridate::ymd("2019-06-02"), lubridate::ymd("2019-06-22")) # necessary to unlist dates vector
CT <- c("CT1", "CT2", "CT")
check_treatments <- c(CT, "NP")
check_blocks <- c("B1", "B2", "B3", "B4")
which_index <- "NDVI"
aggregate_ctls <- T
index_subset <- index_data %>%
filter(DateTime >= check_dates[1] & DateTime <= check_dates[2]) %>%
filter(Site %in% check_site) %>%
filter(Block %in% check_blocks) %>%
filter(Treatment %in% check_treatments) %>%
mutate(Treatment = replace(Treatment, Treatment %in% CT & aggregate_ctls, "CT"), Treatment)  %>% #Choose index to graph
rename_at(vars(contains(which_index)), funs(sub(which_index, 'index', .)))
index_summary <- index_subset %>%
group_by(DOY, Date, Site, Block, Treatment) %>%
summarize_at(vars(index), mean, na.rm=T) %>%
group_by(DOY, Date, Site,Treatment) %>%
group_by(N = n(), add = TRUE) %>% # add number of blocks per site to get Standard Error
summarize_at(vars(index), funs(mean, sd), na.rm=T)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
index_summary <- index_subset %>%
group_by(DOY, Date, Site, Block, Treatment) %>%
summarize_at(vars(index), mean, na.rm=T)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line(aes(Type = Block)) +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line(aes(Type = Block)) +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
?geom_line
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line(aes(linetype = Block)) +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
index_summary <- index_subset %>%
group_by(DOY, Date, Site, Block, Treatment) %>%
summarize_at(vars(index), mean, na.rm=T)
index_site_summary <- index_summary %>%
group_by(DOY, Date, Site,Treatment) %>%
group_by(N = n(), add = TRUE) %>% # add number of blocks per site to get Standard Error
summarize_at(vars(index), funs(mean, sd), na.rm=T)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line(aes(linetype = factor(Block))) +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
index_summary <- index_subset %>%
group_by(DOY, Date, Site, Block, Treatment) %>%
summarize_at(vars(index), funs(mean, sd), na.rm=T)
index_site_summary <- index_summary %>%
group_by(DOY, Date, Site,Treatment) %>%
group_by(N = n(), add = TRUE) %>% # add number of blocks per site to get Standard Error
summarize_at(vars(index), funs(mean, sd), na.rm=T)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line(aes(linetype = factor(Block))) +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
index_summary <- index_subset %>%
group_by(DOY, Date, Site, Block, Treatment) %>%
summarize_at(vars(index), funs(mean, sd), na.rm=T) %>%
group_by(N = n(), add = TRUE) # add number of blocks per site to get Standard Error
index_site_summary <- index_summary %>%
group_by(DOY, Date, Site,Treatment) %>%
group_by(N = n(), add = TRUE) %>% # add number of blocks per site to get Standard Error
summarize_at(vars(index), funs(mean, sd), na.rm=T)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line(aes(linetype = factor(Block))) +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line(aes(linetype = factor(Block))) +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line(aes(linetype = factor(Block))) +
geom_errorbar(aes(ymin = mean - sd/sqrt(N) , ymax= mean + sd/sqrt(N))) +
# geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line(aes(linetype = factor(Block))) +
geom_errorbar(aes(linetype = factor(Block), ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
# geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index)
index_summary <- index_subset %>%
group_by(DOY, Date, Site, Block, Treatment) %>%
summarize_at(vars(index), funs(mean, sd), na.rm=T) %>%
group_by(N = n(), add = TRUE) # add number of blocks per site to get Standard Error
index_site_summary <- index_summary %>%
group_by(DOY, Date, Site,Treatment) %>%
group_by(N = n(), add = TRUE) %>% # add number of blocks per site to get Standard Error
summarize_at(vars(index), funs(mean, sd), na.rm=T)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
# geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
# geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index)
ggplot(data = index_site_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
# geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
# geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index)
+
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
# geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter") +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment, shape = Block), position = "jitter", alpha = 0.6) +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment), position = "jitter", alpha = 0.6) +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment), position = "jitter", alpha = 0.6) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment),  alpha = 0.6) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment),  alpha = 0.4) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
## SPECIFY SITE/DATE/ETC to ZOOM IN ON
check_site <- "MAT"
check_dates <-  c(lubridate::ymd("2019-06-02"), lubridate::ymd("2019-06-22")) # necessary to unlist dates vector
CT <- c("CT1", "CT2", "CT")
check_treatments <- c(CT, "NP")
check_blocks <- c("B1", "B2", "B3", "B4")
which_index <- "NDVI"
aggregate_ctls <- T
index_subset <- index_data %>%
filter(DateTime >= check_dates[1] & DateTime <= check_dates[2]) %>%
filter(Site %in% check_site) %>%
filter(Block %in% check_blocks) %>%
filter(Treatment %in% check_treatments) %>%
mutate(Treatment = replace(Treatment, Treatment %in% CT & aggregate_ctls, "CT"), Treatment)  %>% #Choose index to graph
rename_at(vars(contains(which_index)), funs(sub(which_index, 'index', .)))
index_summary <- index_subset %>%
group_by(DOY, Date, Site, Block, Treatment) %>%
summarize_at(vars(index), funs(mean, sd), na.rm=T) %>%
group_by(N = n(), add = TRUE) # add number of blocks per site to get Standard Error
index_site_summary <- index_summary %>%
group_by(DOY, Date, Site,Treatment) %>%
group_by(N = n(), add = TRUE) %>% # add number of blocks per site to get Standard Error
summarize_at(vars(index), funs(mean, sd), na.rm=T)
ggplot(data = index_summary, mapping = aes(x = DOY, y = mean, color=Treatment)) +
geom_point(data = index_subset, aes(x=DOY, y = index, color = Treatment),  alpha = 0.4) +
geom_point() +
geom_line() +
geom_errorbar(aes(ymin = mean - sd/sqrt(N), ymax= mean + sd/sqrt(N))) +
scale_color_manual(values=c("CT" = "black", "CT1"="black", "CT2"="black",
"N" = "blue2", "NO3" = "dodgerblue", "NH4" = "deepskyblue",
"P" = "red2",
"NP" = "green4",
"F0.5" = np_colors[1],
"F1" = np_colors[2],
"F2" = np_colors[3],
"F5" = np_colors[4],
"F10" = np_colors[5]))  +
labs(y = which_index) +
facet_grid(Site ~ Block)
runApp('UnispecRecord/Visualizations/shiny_unispec_cleaned')
